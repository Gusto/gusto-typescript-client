/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../lib/primitives.js";
import { safeParse } from "../lib/schemas.js";
import * as openEnums from "../types/enums.js";
import { OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdk-validation-error.js";

/**
 * The source of the company benefit. This can be "internal", "external", or "partnered". Company benefits created via the API default to "external". Certain partners can create company benefits with a source of "partnered".
 */
export const CompanyBenefitSource = {
  Internal: "internal",
  External: "external",
  Partnered: "partnered",
} as const;
/**
 * The source of the company benefit. This can be "internal", "external", or "partnered". Company benefits created via the API default to "external". Certain partners can create company benefits with a source of "partnered".
 */
export type CompanyBenefitSource = OpenEnum<typeof CompanyBenefitSource>;

/**
 * The type of catch-up contribution for this benefit, as required by Section 603 of the SECURE 2.0 Act. Only applicable to pre-tax 401(k) and 403(b) benefits.
 */
export const CompanyBenefitCatchUpType = {
  Elective: "elective",
  Deemed: "deemed",
} as const;
/**
 * The type of catch-up contribution for this benefit, as required by Section 603 of the SECURE 2.0 Act. Only applicable to pre-tax 401(k) and 403(b) benefits.
 */
export type CompanyBenefitCatchUpType = OpenEnum<
  typeof CompanyBenefitCatchUpType
>;

/**
 * The representation of a company benefit.
 */
export type CompanyBenefit = {
  /**
   * The current version of the object. See the [versioning guide](https://docs.gusto.com/embedded-payroll/docs/idempotency) for information on how to use this field.
   */
  version?: string | undefined;
  /**
   * The number of employees enrolled in the benefit, only returned when enrollment_count query param is set to true.
   */
  enrollmentCount?: number | undefined;
  /**
   * The UUID of the company.
   */
  companyUuid?: string | undefined;
  /**
   * The UUID of the company benefit.
   */
  uuid: string;
  /**
   * The type of the benefit to which the company benefit belongs.
   */
  benefitType?: number | undefined;
  /**
   * Whether this benefit is active for employee participation. Company benefits may only be deactivated if no employees are actively participating.
   */
  active: boolean;
  /**
   * The description of the company benefit. For example, a company may offer multiple benefits with an ID of 1 (for Medical Insurance). The description would show something more specific like “Kaiser Permanente” or “Blue Cross/ Blue Shield”.
   */
  description?: string | undefined;
  /**
   * The source of the company benefit. This can be "internal", "external", or "partnered". Company benefits created via the API default to "external". Certain partners can create company benefits with a source of "partnered".
   */
  source?: CompanyBenefitSource | undefined;
  /**
   * The partner name of the partner that created the company benefit. For example, "XYZ Corp".
   */
  partnerName?: string | null | undefined;
  /**
   * Whether this company benefit can be deleted. Deletable will be set to true if the benefit has not been used in payroll, has no employee benefits associated, and the benefit is not owned by Gusto or a Partner
   */
  deletable?: boolean | undefined;
  /**
   * Whether employee deductions and company contributions can be set as percentages of payroll for an individual employee. This is determined by the type of benefit and is not configurable by the company.
   */
  supportsPercentageAmounts?: boolean | undefined;
  /**
   * Whether the employer is subject to pay employer taxes when an employee is on leave. Only applicable to third party sick pay benefits.
   */
  responsibleForEmployerTaxes?: boolean | undefined;
  /**
   * Whether the employer is subject to file W-2 forms for an employee on leave. Only applicable to third party sick pay benefits.
   */
  responsibleForEmployeeW2?: boolean | undefined;
  /**
   * The type of catch-up contribution for this benefit, as required by Section 603 of the SECURE 2.0 Act. Only applicable to pre-tax 401(k) and 403(b) benefits.
   */
  catchUpType?: CompanyBenefitCatchUpType | null | undefined;
};

/** @internal */
export const CompanyBenefitSource$inboundSchema: z.ZodMiniType<
  CompanyBenefitSource,
  unknown
> = openEnums.inboundSchema(CompanyBenefitSource);

/** @internal */
export const CompanyBenefitCatchUpType$inboundSchema: z.ZodMiniType<
  CompanyBenefitCatchUpType,
  unknown
> = openEnums.inboundSchema(CompanyBenefitCatchUpType);

/** @internal */
export const CompanyBenefit$inboundSchema: z.ZodMiniType<
  CompanyBenefit,
  unknown
> = z.pipe(
  z.object({
    version: types.optional(types.string()),
    enrollment_count: types.optional(types.number()),
    company_uuid: types.optional(types.string()),
    uuid: types.string(),
    benefit_type: types.optional(types.number()),
    active: z._default(types.boolean(), true),
    description: types.optional(types.string()),
    source: types.optional(CompanyBenefitSource$inboundSchema),
    partner_name: z.optional(z.nullable(types.string())),
    deletable: types.optional(types.boolean()),
    supports_percentage_amounts: types.optional(types.boolean()),
    responsible_for_employer_taxes: types.optional(types.boolean()),
    responsible_for_employee_w2: types.optional(types.boolean()),
    catch_up_type: z.optional(
      z.nullable(CompanyBenefitCatchUpType$inboundSchema),
    ),
  }),
  z.transform((v) => {
    return remap$(v, {
      "enrollment_count": "enrollmentCount",
      "company_uuid": "companyUuid",
      "benefit_type": "benefitType",
      "partner_name": "partnerName",
      "supports_percentage_amounts": "supportsPercentageAmounts",
      "responsible_for_employer_taxes": "responsibleForEmployerTaxes",
      "responsible_for_employee_w2": "responsibleForEmployeeW2",
      "catch_up_type": "catchUpType",
    });
  }),
);

export function companyBenefitFromJSON(
  jsonString: string,
): SafeParseResult<CompanyBenefit, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CompanyBenefit$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CompanyBenefit' from JSON`,
  );
}
