/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { webhooksCreateSubscription } from "../funcs/webhooks-create-subscription.js";
import { webhooksDeleteSubscription } from "../funcs/webhooks-delete-subscription.js";
import { webhooksGetSubscription } from "../funcs/webhooks-get-subscription.js";
import { webhooksGetV1WebhooksHealthCheck } from "../funcs/webhooks-get-v1-webhooks-health-check.js";
import { webhooksListSubscriptions } from "../funcs/webhooks-list-subscriptions.js";
import { webhooksRequestVerificationToken } from "../funcs/webhooks-request-verification-token.js";
import { webhooksUpdateSubscription } from "../funcs/webhooks-update-subscription.js";
import { webhooksVerify } from "../funcs/webhooks-verify.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Webhooks extends ClientSDK {
  /**
   * Create a webhook subscription
   *
   * @remarks
   * Create a webhook subscription to receive events of the specified subscription_types whenever there is a state change.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:write`
   */
  async createSubscription(
    security: operations.PostV1WebhookSubscriptionSecurity,
    request: operations.PostV1WebhookSubscriptionRequest,
    options?: RequestOptions,
  ): Promise<models.WebhookSubscription> {
    return unwrapAsync(webhooksCreateSubscription(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * List webhook subscriptions
   *
   * @remarks
   * Returns all webhook subscriptions associated with the provided Partner API token.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:read`
   */
  async listSubscriptions(
    security: operations.GetV1WebhookSubscriptionsSecurity,
    request?: operations.GetV1WebhookSubscriptionsRequest | undefined,
    options?: RequestOptions,
  ): Promise<Array<models.WebhookSubscription>> {
    return unwrapAsync(webhooksListSubscriptions(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Update a webhook subscription
   *
   * @remarks
   * Updates the Webhook Subscription associated with the provided UUID.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:write`
   */
  async updateSubscription(
    security: operations.PutV1WebhookSubscriptionUuidSecurity,
    request: operations.PutV1WebhookSubscriptionUuidRequest,
    options?: RequestOptions,
  ): Promise<models.WebhookSubscription> {
    return unwrapAsync(webhooksUpdateSubscription(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Get a webhook subscription
   *
   * @remarks
   * Returns the Webhook Subscription associated with the provided UUID.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:read`
   */
  async getSubscription(
    security: operations.GetV1WebhookSubscriptionUuidSecurity,
    request: operations.GetV1WebhookSubscriptionUuidRequest,
    options?: RequestOptions,
  ): Promise<models.WebhookSubscription> {
    return unwrapAsync(webhooksGetSubscription(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Delete a webhook subscription
   *
   * @remarks
   * Deletes the Webhook Subscription associated with the provided UUID.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:write`
   */
  async deleteSubscription(
    security: operations.DeleteV1WebhookSubscriptionUuidSecurity,
    request: operations.DeleteV1WebhookSubscriptionUuidRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(webhooksDeleteSubscription(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Verify the webhook subscription
   *
   * @remarks
   * When a webhook subscription is created, a `verification_token` is POSTed to the registered webhook subscription URL. This `verify` endpoint needs to be called with `verification_token` before webhook events can be sent to the registered webhook URL.
   *
   * Use the /v1/webhook_subscriptions/{webhook_subscription_uuid}/request_verification_token API to resend the `verification_token` to the Subscriber.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:write`
   */
  async verify(
    security: operations.PutV1VerifyWebhookSubscriptionUuidSecurity,
    request: operations.PutV1VerifyWebhookSubscriptionUuidRequest,
    options?: RequestOptions,
  ): Promise<models.WebhookSubscription> {
    return unwrapAsync(webhooksVerify(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Request the webhook subscription verification_token
   *
   * @remarks
   * Request that the webhook subscription `verification_token` be POSTed to the Subscription URL.
   *
   * > ðŸ“˜ System Access Authentication
   * >
   * > This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access).
   *
   * scope: `webhook_subscriptions:read`
   */
  async requestVerificationToken(
    security: operations.GetV1WebhookSubscriptionVerificationTokenUuidSecurity,
    request: operations.GetV1WebhookSubscriptionVerificationTokenUuidRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(webhooksRequestVerificationToken(
      this,
      security,
      request,
      options,
    ));
  }

  /**
   * Get the webhooks health status
   *
   * @remarks
   * Returns the health status (`healthy`, `unhealthy`, or `unknown`) of the webhooks system based on the last ten minutes of activity.
   *
   * ðŸ“˜ System Access Authentication
   *
   * This endpoint uses the [Bearer Auth scheme with the system-level access token in the HTTP Authorization header](https://docs.gusto.com/embedded-payroll/docs/system-access)
   *
   * scope: `webhook_subscriptions:read`
   */
  async getV1WebhooksHealthCheck(
    security: operations.GetV1WebhooksHealthCheckSecurity,
    request?: operations.GetV1WebhooksHealthCheckRequest | undefined,
    options?: RequestOptions,
  ): Promise<models.WebhooksHealthCheckStatus> {
    return unwrapAsync(webhooksGetV1WebhooksHealthCheck(
      this,
      security,
      request,
      options,
    ));
  }
}
