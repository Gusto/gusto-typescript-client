/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { GustoEmbedded } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Introspection Get V1 Token Info Example", async () => {
  const gustoEmbedded = new GustoEmbedded({
    httpClient: createTestHTTPClient("get-v1-token-info-Example"),
    companyAccessAuth: process.env["GUSTOEMBEDDED_COMPANY_ACCESS_AUTH"] ?? "",
  });

  const result = await gustoEmbedded.introspection.getTokenInfo({});
  expect(result).toBeDefined();
  expect(result).toEqual({
    scope: "companies:read companies:write employees:read",
    resource: {
      type: "Company",
      uuid: "5eca5127-6048-43ad-91ee-b56a0c34bc85",
    },
    resourceOwner: {
      type: "CompanyAdmin",
      uuid: "367871c2-3f70-4874-adc9-f1736647e8e1",
    },
  });
});

test("Introspection Refresh Access Token Example", async () => {
  const gustoEmbedded = new GustoEmbedded({
    httpClient: createTestHTTPClient("refresh-access-token-Example"),
    companyAccessAuth: process.env["GUSTOEMBEDDED_COMPANY_ACCESS_AUTH"] ?? "",
  });

  const result = await gustoEmbedded.introspection.refreshAccessToken({
    requestBody: {
      clientId: "<id>",
      clientSecret: "<value>",
      refreshToken: "<value>",
      grantType: "<value>",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    accessToken: "737HdeXfIqgx-NfaUFRuhV7JDe6ns6ptanJSMuQzjlc",
    tokenType: "bearer",
    expiresIn: 7200,
    refreshToken: "iEjL96L9Pndwmi-xVX3Q-xbrvvhnjHYGX87sopgGJ8E",
    createdAt: "1732033824",
    scope: "ach_transactions:read benefits:read companies:read",
  });
});
