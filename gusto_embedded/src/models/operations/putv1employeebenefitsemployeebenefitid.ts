/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import {
  EmployeeBenefit,
  EmployeeBenefit$inboundSchema,
} from "../components/employeebenefit.js";
import {
  HTTPMetadata,
  HTTPMetadata$inboundSchema,
} from "../components/httpmetadata.js";
import {
  VersionHeader,
  VersionHeader$outboundSchema,
} from "../components/versionheader.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

/**
 * The company contribution scheme.
 *
 * @remarks
 *
 * `amount`: The company contributes a fixed amount per payroll. If elective is true, the contribution is matching, dollar-for-dollar.
 *
 * `percentage`: The company contributes a percentage of the payroll amount per payroll period. If elective is true, the contribution is matching, dollar-for-dollar.
 *
 * `tiered`: The size of the company contribution corresponds to the size of the employee deduction relative to a tiered matching scheme.
 */
export const PutV1EmployeeBenefitsEmployeeBenefitIdType = {
  Amount: "amount",
  Percentage: "percentage",
  Tiered: "tiered",
} as const;
/**
 * The company contribution scheme.
 *
 * @remarks
 *
 * `amount`: The company contributes a fixed amount per payroll. If elective is true, the contribution is matching, dollar-for-dollar.
 *
 * `percentage`: The company contributes a percentage of the payroll amount per payroll period. If elective is true, the contribution is matching, dollar-for-dollar.
 *
 * `tiered`: The size of the company contribution corresponds to the size of the employee deduction relative to a tiered matching scheme.
 */
export type PutV1EmployeeBenefitsEmployeeBenefitIdType = ClosedEnum<
  typeof PutV1EmployeeBenefitsEmployeeBenefitIdType
>;

/**
 * A single tier of a tiered matching scheme.
 */
export type Value2 = {
  /**
   * The percentage of employee deduction within this tier the company contribution will match.
   */
  rate?: string | undefined;
  /**
   * Specifies the upper limit (inclusive) percentage of the employee contribution that this tier applies to.
   *
   * @remarks
   *
   * Use threshold to define each tier's end point, with tiers applied cumulatively from 0% upwards.
   *
   * For example:
   *
   * If the first tier has a threshold of "3", and rate of "100", the company will match 100% of employee contributions from 0% up to and including 3% of payroll.
   *
   * If the next tier has a threshold of "5" and a rate of "50", the company will match 50% of contributions from above 3% up to and including 5% of payroll.
   */
  threshold?: string | undefined;
};

/**
 * For the `amount` and `percentage` contribution types, the value of the corresponding amount or percentage.
 *
 * @remarks
 *
 * For the `tiered` contribution type, an array of tiers.
 */
export type PutV1EmployeeBenefitsEmployeeBenefitIdValue =
  | string
  | Array<Value2>;

/**
 * An object representing the type and value of the company contribution.
 */
export type PutV1EmployeeBenefitsEmployeeBenefitIdContribution = {
  /**
   * The company contribution scheme.
   *
   * @remarks
   *
   * `amount`: The company contributes a fixed amount per payroll. If elective is true, the contribution is matching, dollar-for-dollar.
   *
   * `percentage`: The company contributes a percentage of the payroll amount per payroll period. If elective is true, the contribution is matching, dollar-for-dollar.
   *
   * `tiered`: The size of the company contribution corresponds to the size of the employee deduction relative to a tiered matching scheme.
   */
  type?: PutV1EmployeeBenefitsEmployeeBenefitIdType | undefined;
  /**
   * For the `amount` and `percentage` contribution types, the value of the corresponding amount or percentage.
   *
   * @remarks
   *
   * For the `tiered` contribution type, an array of tiers.
   */
  value?: string | Array<Value2> | undefined;
};

/**
 * Some benefits require additional information to determine
 *
 * @remarks
 * their limit.
 *
 * `Family` or `Individual`: Applicable to HSA benefit.
 *
 * `Joint Filing or Single` or `Married and Filing Separately`: Applicable to Dependent Care FSA benefit.
 */
export const PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption = {
  Family: "Family",
  Individual: "Individual",
  JointFilingOrSingle: "Joint Filing or Single",
  MarriedAndFilingSeparately: "Married and Filing Separately",
} as const;
/**
 * Some benefits require additional information to determine
 *
 * @remarks
 * their limit.
 *
 * `Family` or `Individual`: Applicable to HSA benefit.
 *
 * `Joint Filing or Single` or `Married and Filing Separately`: Applicable to Dependent Care FSA benefit.
 */
export type PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption = ClosedEnum<
  typeof PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption
>;

/**
 * Whether the employee deduction reduces taxable income or not. Only valid for Group Term Life benefits. Note: when the value is not "unset", coverage amount and coverage salary multiplier are ignored.
 */
export const PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome =
  {
    Unset: "unset",
    ReducesTaxableIncome: "reduces_taxable_income",
    DoesNotReduceTaxableIncome: "does_not_reduce_taxable_income",
  } as const;
/**
 * Whether the employee deduction reduces taxable income or not. Only valid for Group Term Life benefits. Note: when the value is not "unset", coverage amount and coverage salary multiplier are ignored.
 */
export type PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome =
  ClosedEnum<
    typeof PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome
  >;

export type PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody = {
  /**
   * The current version of the object. See the [versioning guide](https://docs.gusto.com/embedded-payroll/docs/versioning#object-layer) for information on how to use this field.
   */
  version: string;
  /**
   * Whether the employee benefit is active.
   */
  active?: boolean | undefined;
  /**
   * The amount to be deducted, per pay period, from the employee's pay.
   */
  employeeDeduction?: string | undefined;
  /**
   * Whether the employee deduction amount should be treated as a percentage to be deducted from each payroll.
   */
  deductAsPercentage?: boolean | undefined;
  /**
   * The maximum employee deduction amount per year. A null value signifies no limit.
   */
  employeeDeductionAnnualMaximum?: string | null | undefined;
  /**
   * An object representing the type and value of the company contribution.
   */
  contribution?: PutV1EmployeeBenefitsEmployeeBenefitIdContribution | undefined;
  /**
   * Whether the company contribution is elective (aka "matching"). For `tiered`, `elective_amount`, and `elective_percentage` contribution types this is ignored and assumed to be `true`.
   */
  elective?: boolean | undefined;
  /**
   * The maximum company contribution amount per year. A null value signifies no limit.
   */
  companyContributionAnnualMaximum?: string | null | undefined;
  /**
   * Some benefits require additional information to determine
   *
   * @remarks
   * their limit.
   *
   * `Family` or `Individual`: Applicable to HSA benefit.
   *
   * `Joint Filing or Single` or `Married and Filing Separately`: Applicable to Dependent Care FSA benefit.
   */
  limitOption?:
    | PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption
    | null
    | undefined;
  /**
   * Whether the employee should use a benefit’s "catch up" rate. Only Roth 401k and 401k benefits use this value for employees over 50.
   */
  catchUp?: boolean | undefined;
  /**
   * The amount that the employee is insured for. Note: company contribution cannot be present if coverage amount is set.
   */
  coverageAmount?: string | null | undefined;
  /**
   * Whether the employee deduction reduces taxable income or not. Only valid for Group Term Life benefits. Note: when the value is not "unset", coverage amount and coverage salary multiplier are ignored.
   */
  deductionReducesTaxableIncome?:
    | PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome
    | null
    | undefined;
  /**
   * The coverage amount as a multiple of the employee’s salary. Only applicable for Group Term Life benefits. Note: cannot be set if coverage amount is also set.
   */
  coverageSalaryMultiplier?: string | undefined;
  /**
   * The amount to be paid, per pay period, by the company.
   *
   * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  companyContribution?: string | undefined;
  /**
   * Whether the company contribution amount should be treated as a percentage to be deducted from each payroll.
   *
   * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
   */
  contributeAsPercentage?: boolean | undefined;
};

export type PutV1EmployeeBenefitsEmployeeBenefitIdRequest = {
  /**
   * The UUID of the employee benefit.
   */
  employeeBenefitId: string;
  /**
   * Determines the date-based API version associated with your API call. If none is provided, your application's [minimum API version](https://docs.gusto.com/embedded-payroll/docs/api-versioning#minimum-api-version) is used.
   */
  xGustoAPIVersion?: VersionHeader | undefined;
  requestBody: PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody;
};

export type PutV1EmployeeBenefitsEmployeeBenefitIdResponse = {
  httpMeta: HTTPMetadata;
  /**
   * Example response
   */
  employeeBenefit?: EmployeeBenefit | undefined;
};

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdType$outboundSchema:
  z.ZodNativeEnum<typeof PutV1EmployeeBenefitsEmployeeBenefitIdType> = z
    .nativeEnum(PutV1EmployeeBenefitsEmployeeBenefitIdType);

/** @internal */
export type Value2$Outbound = {
  rate?: string | undefined;
  threshold?: string | undefined;
};

/** @internal */
export const Value2$outboundSchema: z.ZodType<
  Value2$Outbound,
  z.ZodTypeDef,
  Value2
> = z.object({
  rate: z.string().optional(),
  threshold: z.string().optional(),
});

export function value2ToJSON(value2: Value2): string {
  return JSON.stringify(Value2$outboundSchema.parse(value2));
}

/** @internal */
export type PutV1EmployeeBenefitsEmployeeBenefitIdValue$Outbound =
  | string
  | Array<Value2$Outbound>;

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdValue$outboundSchema:
  z.ZodType<
    PutV1EmployeeBenefitsEmployeeBenefitIdValue$Outbound,
    z.ZodTypeDef,
    PutV1EmployeeBenefitsEmployeeBenefitIdValue
  > = z.union([z.string(), z.array(z.lazy(() => Value2$outboundSchema))]);

export function putV1EmployeeBenefitsEmployeeBenefitIdValueToJSON(
  putV1EmployeeBenefitsEmployeeBenefitIdValue:
    PutV1EmployeeBenefitsEmployeeBenefitIdValue,
): string {
  return JSON.stringify(
    PutV1EmployeeBenefitsEmployeeBenefitIdValue$outboundSchema.parse(
      putV1EmployeeBenefitsEmployeeBenefitIdValue,
    ),
  );
}

/** @internal */
export type PutV1EmployeeBenefitsEmployeeBenefitIdContribution$Outbound = {
  type?: string | undefined;
  value?: string | Array<Value2$Outbound> | undefined;
};

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdContribution$outboundSchema:
  z.ZodType<
    PutV1EmployeeBenefitsEmployeeBenefitIdContribution$Outbound,
    z.ZodTypeDef,
    PutV1EmployeeBenefitsEmployeeBenefitIdContribution
  > = z.object({
    type: PutV1EmployeeBenefitsEmployeeBenefitIdType$outboundSchema.optional(),
    value: z.union([z.string(), z.array(z.lazy(() => Value2$outboundSchema))])
      .optional(),
  });

export function putV1EmployeeBenefitsEmployeeBenefitIdContributionToJSON(
  putV1EmployeeBenefitsEmployeeBenefitIdContribution:
    PutV1EmployeeBenefitsEmployeeBenefitIdContribution,
): string {
  return JSON.stringify(
    PutV1EmployeeBenefitsEmployeeBenefitIdContribution$outboundSchema.parse(
      putV1EmployeeBenefitsEmployeeBenefitIdContribution,
    ),
  );
}

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption$outboundSchema:
  z.ZodNativeEnum<typeof PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption> = z
    .nativeEnum(PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption);

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome$outboundSchema:
  z.ZodNativeEnum<
    typeof PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome
  > = z.nativeEnum(
    PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome,
  );

/** @internal */
export type PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$Outbound = {
  version: string;
  active?: boolean | undefined;
  employee_deduction: string;
  deduct_as_percentage?: boolean | undefined;
  employee_deduction_annual_maximum?: string | null | undefined;
  contribution?:
    | PutV1EmployeeBenefitsEmployeeBenefitIdContribution$Outbound
    | undefined;
  elective: boolean;
  company_contribution_annual_maximum?: string | null | undefined;
  limit_option?: string | null | undefined;
  catch_up: boolean;
  coverage_amount?: string | null | undefined;
  deduction_reduces_taxable_income: string | null;
  coverage_salary_multiplier: string;
  company_contribution: string;
  contribute_as_percentage: boolean;
};

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$outboundSchema:
  z.ZodType<
    PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$Outbound,
    z.ZodTypeDef,
    PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody
  > = z.object({
    version: z.string(),
    active: z.boolean().optional(),
    employeeDeduction: z.string().default("0.00"),
    deductAsPercentage: z.boolean().optional(),
    employeeDeductionAnnualMaximum: z.nullable(z.string()).optional(),
    contribution: z.lazy(() =>
      PutV1EmployeeBenefitsEmployeeBenefitIdContribution$outboundSchema
    ).optional(),
    elective: z.boolean().default(false),
    companyContributionAnnualMaximum: z.nullable(z.string()).optional(),
    limitOption: z.nullable(
      PutV1EmployeeBenefitsEmployeeBenefitIdLimitOption$outboundSchema,
    ).optional(),
    catchUp: z.boolean().default(false),
    coverageAmount: z.nullable(z.string()).optional(),
    deductionReducesTaxableIncome: z.nullable(
      PutV1EmployeeBenefitsEmployeeBenefitIdDeductionReducesTaxableIncome$outboundSchema
        .default("unset"),
    ),
    coverageSalaryMultiplier: z.string().default("0.00"),
    companyContribution: z.string().default("0.00"),
    contributeAsPercentage: z.boolean().default(false),
  }).transform((v) => {
    return remap$(v, {
      employeeDeduction: "employee_deduction",
      deductAsPercentage: "deduct_as_percentage",
      employeeDeductionAnnualMaximum: "employee_deduction_annual_maximum",
      companyContributionAnnualMaximum: "company_contribution_annual_maximum",
      limitOption: "limit_option",
      catchUp: "catch_up",
      coverageAmount: "coverage_amount",
      deductionReducesTaxableIncome: "deduction_reduces_taxable_income",
      coverageSalaryMultiplier: "coverage_salary_multiplier",
      companyContribution: "company_contribution",
      contributeAsPercentage: "contribute_as_percentage",
    });
  });

export function putV1EmployeeBenefitsEmployeeBenefitIdRequestBodyToJSON(
  putV1EmployeeBenefitsEmployeeBenefitIdRequestBody:
    PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody,
): string {
  return JSON.stringify(
    PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$outboundSchema.parse(
      putV1EmployeeBenefitsEmployeeBenefitIdRequestBody,
    ),
  );
}

/** @internal */
export type PutV1EmployeeBenefitsEmployeeBenefitIdRequest$Outbound = {
  employee_benefit_id: string;
  "X-Gusto-API-Version": string;
  RequestBody: PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$Outbound;
};

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdRequest$outboundSchema:
  z.ZodType<
    PutV1EmployeeBenefitsEmployeeBenefitIdRequest$Outbound,
    z.ZodTypeDef,
    PutV1EmployeeBenefitsEmployeeBenefitIdRequest
  > = z.object({
    employeeBenefitId: z.string(),
    xGustoAPIVersion: VersionHeader$outboundSchema.default("2025-06-15"),
    requestBody: z.lazy(() =>
      PutV1EmployeeBenefitsEmployeeBenefitIdRequestBody$outboundSchema
    ),
  }).transform((v) => {
    return remap$(v, {
      employeeBenefitId: "employee_benefit_id",
      xGustoAPIVersion: "X-Gusto-API-Version",
      requestBody: "RequestBody",
    });
  });

export function putV1EmployeeBenefitsEmployeeBenefitIdRequestToJSON(
  putV1EmployeeBenefitsEmployeeBenefitIdRequest:
    PutV1EmployeeBenefitsEmployeeBenefitIdRequest,
): string {
  return JSON.stringify(
    PutV1EmployeeBenefitsEmployeeBenefitIdRequest$outboundSchema.parse(
      putV1EmployeeBenefitsEmployeeBenefitIdRequest,
    ),
  );
}

/** @internal */
export const PutV1EmployeeBenefitsEmployeeBenefitIdResponse$inboundSchema:
  z.ZodType<
    PutV1EmployeeBenefitsEmployeeBenefitIdResponse,
    z.ZodTypeDef,
    unknown
  > = z.object({
    HttpMeta: HTTPMetadata$inboundSchema,
    "Employee-Benefit": EmployeeBenefit$inboundSchema.optional(),
  }).transform((v) => {
    return remap$(v, {
      "HttpMeta": "httpMeta",
      "Employee-Benefit": "employeeBenefit",
    });
  });

export function putV1EmployeeBenefitsEmployeeBenefitIdResponseFromJSON(
  jsonString: string,
): SafeParseResult<
  PutV1EmployeeBenefitsEmployeeBenefitIdResponse,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      PutV1EmployeeBenefitsEmployeeBenefitIdResponse$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'PutV1EmployeeBenefitsEmployeeBenefitIdResponse' from JSON`,
  );
}
